{"version":3,"file":"ngx-environment-variable.umd.js","sources":["../lib/options.ts","../lib/ngx-environment-variable.ts"],"sourcesContent":["import NgxEnvOptions from './interface';\n\nconst ngxEnvOptions: NgxEnvOptions = {\n  envVarName: 'ngxEnv',\n  origin: 'http://localhost:4200'\n};\n\nexport default ngxEnvOptions;\n","import NgxEnvOptions from './interface';\nimport ngxEnvOptions from './options';\n\nconst proxyHandler = {\n  options: ngxEnvOptions,\n  get: function(target, key) {\n    return this.options.origin === window.location.origin\n      ? target[key]\n      : undefined;\n  },\n  set: function(target, key, value) {\n    return true;\n  },\n  deleteProperty: function() {\n    return true;\n  }\n};\n\nfunction setNgxEnv(env: any, options: NgxEnvOptions) {\n  // set origin\n  if (options && options.origin) {\n    proxyHandler.options.origin = options.origin;\n  }\n  if (env && typeof env === 'object' && !Array.isArray(env)) {\n    // Set NgxEnv\n    const tempNgxEnv = {};\n    // create temporary environment object.\n    for (let key in env) {\n      const isObject = typeof env[key] === 'object' && !Array.isArray(env[key]);\n      tempNgxEnv[key] = isObject ? Object.freeze(env[key]) : env[key];\n    }\n\n    // define environment variable name\n    const envVarName =\n      options && options.envVarName\n        ? options.envVarName\n        : ngxEnvOptions.envVarName;\n\n    // create and proxy environment property in window object.\n    Object.defineProperty(window, envVarName, {\n      value: new Proxy(tempNgxEnv, proxyHandler),\n      writable: false,\n      configurable: false,\n      enumerable: true\n    });\n  } else {\n    throw new Error('NgxEnv : invalid environment');\n  }\n}\n\nexport default setNgxEnv;\n"],"names":[],"mappings":";;;;;;IAEA,MAAM,aAAa,GAAkB;QACnC,UAAU,EAAE,QAAQ;QACpB,MAAM,EAAE,uBAAuB;KAChC,CAAC;;ICFF,MAAM,YAAY,GAAG;QACnB,OAAO,EAAE,aAAa;QACtB,GAAG,EAAE,UAAS,MAAM,EAAE,GAAG;YACvB,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,KAAK,MAAM,CAAC,QAAQ,CAAC,MAAM;kBACjD,MAAM,CAAC,GAAG,CAAC;kBACX,SAAS,CAAC;SACf;QACD,GAAG,EAAE,UAAS,MAAM,EAAE,GAAG,EAAE,KAAK;YAC9B,OAAO,IAAI,CAAC;SACb;QACD,cAAc,EAAE;YACd,OAAO,IAAI,CAAC;SACb;KACF,CAAC;IAEF,mBAAmB,GAAQ,EAAE,OAAsB;;QAEjD,IAAI,OAAO,IAAI,OAAO,CAAC,MAAM,EAAE;YAC7B,YAAY,CAAC,OAAO,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC;SAC9C;QACD,IAAI,GAAG,IAAI,OAAO,GAAG,KAAK,QAAQ,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;;YAEzD,MAAM,UAAU,GAAG,EAAE,CAAC;;YAEtB,KAAK,IAAI,GAAG,IAAI,GAAG,EAAE;gBACnB,MAAM,QAAQ,GAAG,OAAO,GAAG,CAAC,GAAG,CAAC,KAAK,QAAQ,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;gBAC1E,UAAU,CAAC,GAAG,CAAC,GAAG,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC;aACjE;;YAGD,MAAM,UAAU,GACd,OAAO,IAAI,OAAO,CAAC,UAAU;kBACzB,OAAO,CAAC,UAAU;kBAClB,aAAa,CAAC,UAAU,CAAC;;YAG/B,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,UAAU,EAAE;gBACxC,KAAK,EAAE,IAAI,KAAK,CAAC,UAAU,EAAE,YAAY,CAAC;gBAC1C,QAAQ,EAAE,KAAK;gBACf,YAAY,EAAE,KAAK;gBACnB,UAAU,EAAE,IAAI;aACjB,CAAC,CAAC;SACJ;aAAM;YACL,MAAM,IAAI,KAAK,CAAC,8BAA8B,CAAC,CAAC;SACjD;IACH,CAAC;;;;;;;;"}