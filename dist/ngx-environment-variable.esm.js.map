{"version":3,"file":"ngx-environment-variable.esm.js","sources":["../lib/options.ts","../lib/ngx-environment-variable.ts"],"sourcesContent":["import NgxEnvOptions from './interface';\n\nconst ngxEnvOptions: NgxEnvOptions = {\n  envVarName: 'ngxEnv',\n  origin: 'http://localhost:4200'\n};\n\nexport default ngxEnvOptions;\n","import NgxEnvOptions from './interface';\nimport ngxEnvOptions from './options';\n\nconst proxyHandler = {\n  options: ngxEnvOptions,\n  get: function(target, key) {\n    return this.options.origin === window.location.origin\n      ? target[key]\n      : undefined;\n  },\n  set: function(target, key, value) {\n    return true;\n  },\n  deleteProperty: function() {\n    return true;\n  }\n};\n\nfunction setNgxEnv(env: any, options: NgxEnvOptions) {\n  // set origin\n  if (options && options.origin) {\n    proxyHandler.options.origin = options.origin;\n  }\n  if (env && typeof env === 'object' && !Array.isArray(env)) {\n    // Set NgxEnv\n    const tempNgxEnv = {};\n    // create temporary environment object.\n    for (let key in env) {\n      const isObject = typeof env[key] === 'object' && !Array.isArray(env[key]);\n      tempNgxEnv[key] = isObject ? Object.freeze(env[key]) : env[key];\n    }\n\n    // define environment variable name\n    const envVarName =\n      options && options.envVarName\n        ? options.envVarName\n        : ngxEnvOptions.envVarName;\n\n    // create and proxy environment property in window object.\n    Object.defineProperty(window, envVarName, {\n      value: new Proxy(tempNgxEnv, proxyHandler),\n      writable: false,\n      configurable: false,\n      enumerable: true\n    });\n  } else {\n    throw new Error('NgxEnv : invalid environment');\n  }\n}\n\nexport default setNgxEnv;\n"],"names":[],"mappings":"AAEA,MAAM,aAAa,GAAkB;IACnC,UAAU,EAAE,QAAQ;IACpB,MAAM,EAAE,uBAAuB;CAChC,CAAC;;ACFF,MAAM,YAAY,GAAG;IACnB,OAAO,EAAE,aAAa;IACtB,GAAG,EAAE,UAAS,MAAM,EAAE,GAAG;QACvB,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,KAAK,MAAM,CAAC,QAAQ,CAAC,MAAM;cACjD,MAAM,CAAC,GAAG,CAAC;cACX,SAAS,CAAC;KACf;IACD,GAAG,EAAE,UAAS,MAAM,EAAE,GAAG,EAAE,KAAK;QAC9B,OAAO,IAAI,CAAC;KACb;IACD,cAAc,EAAE;QACd,OAAO,IAAI,CAAC;KACb;CACF,CAAC;AAEF,mBAAmB,GAAQ,EAAE,OAAsB;;IAEjD,IAAI,OAAO,IAAI,OAAO,CAAC,MAAM,EAAE;QAC7B,YAAY,CAAC,OAAO,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC;KAC9C;IACD,IAAI,GAAG,IAAI,OAAO,GAAG,KAAK,QAAQ,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;;QAEzD,MAAM,UAAU,GAAG,EAAE,CAAC;;QAEtB,KAAK,IAAI,GAAG,IAAI,GAAG,EAAE;YACnB,MAAM,QAAQ,GAAG,OAAO,GAAG,CAAC,GAAG,CAAC,KAAK,QAAQ,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;YAC1E,UAAU,CAAC,GAAG,CAAC,GAAG,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC;SACjE;;QAGD,MAAM,UAAU,GACd,OAAO,IAAI,OAAO,CAAC,UAAU;cACzB,OAAO,CAAC,UAAU;cAClB,aAAa,CAAC,UAAU,CAAC;;QAG/B,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,UAAU,EAAE;YACxC,KAAK,EAAE,IAAI,KAAK,CAAC,UAAU,EAAE,YAAY,CAAC;YAC1C,QAAQ,EAAE,KAAK;YACf,YAAY,EAAE,KAAK;YACnB,UAAU,EAAE,IAAI;SACjB,CAAC,CAAC;KACJ;SAAM;QACL,MAAM,IAAI,KAAK,CAAC,8BAA8B,CAAC,CAAC;KACjD;CACF;;;;"}